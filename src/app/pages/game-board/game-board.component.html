<div class="game-container">
  <!-- Header compacto solo con info -->
  @if (hasGeneratedBoard()) {
    <div class="game-info" @fadeIn>
      <div class="info-row">
        <div class="game-id">
          <mat-icon>tag</mat-icon>
          <span>{{ gameId() }}</span>
        </div>
        <div class="stats-compact">
          <mat-chip-set>
            <mat-chip>
              <mat-icon>check_circle</mat-icon>
              {{ markedCount() }}/{{ gameSettings().winningCount }}
            </mat-chip>
            @if (hasBingo()) {
              <mat-chip color="accent" highlighted>
                <mat-icon>emoji_events</mat-icon>
                Â¡BINGO!
              </mat-chip>
            }
          </mat-chip-set>
        </div>
        <div class="actions-compact">
          <button mat-icon-button (click)="shareGame()" matTooltip="Compartir link">
            <mat-icon>share</mat-icon>
          </button>
          <button mat-icon-button (click)="resetBoard()" matTooltip="Limpiar marcas">
            <mat-icon>refresh</mat-icon>
          </button>
        </div>
      </div>
    </div>
  }

  @if (!hasGeneratedBoard()) {
    <mat-card class="generate-card" @fadeIn>
      <mat-card-content>
        <div class="generate-content">
          <div class="reindeer-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" width="80" height="80">
              <!-- Cabeza -->
              <ellipse cx="32" cy="35" rx="12" ry="14" fill="#8B4513"/>
              <!-- Orejas -->
              <ellipse cx="24" cy="26" rx="3" ry="5" fill="#8B4513"/>
              <ellipse cx="40" cy="26" rx="3" ry="5" fill="#8B4513"/>
              <!-- Astas -->
              <path d="M 20 20 L 18 12 M 20 20 L 16 18 M 20 20 L 22 15" stroke="#654321" stroke-width="2" fill="none"/>
              <path d="M 44 20 L 46 12 M 44 20 L 48 18 M 44 20 L 42 15" stroke="#654321" stroke-width="2" fill="none"/>
              <!-- Ojos -->
              <circle cx="28" cy="33" r="2" fill="#000"/>
              <circle cx="36" cy="33" r="2" fill="#000"/>
              <!-- Nariz roja -->
              <circle cx="32" cy="38" r="3" fill="#FF0000"/>
              <!-- Sonrisa -->
              <path d="M 28 42 Q 32 44 36 42" stroke="#000" stroke-width="1.5" fill="none"/>
            </svg>
          </div>
          <h2>Â¡Bienvenido a la Partida!</h2>
          <p>Genera tu cartÃ³n aleatorio con {{ gameSettings().boardSize }} canciones. 
             Necesitas marcar {{ gameSettings().winningCount }} para ganar. 
             Una vez generado, no podrÃ¡s cambiarlo.</p>
          <button mat-raised-button color="primary" (click)="generateNewBoard()" class="generate-button">
            <mat-icon>auto_awesome</mat-icon>
            Generar Mi CartÃ³n
          </button>
          <p class="note">ðŸ’¡ Cada jugador tendrÃ¡ un cartÃ³n diferente</p>
        </div>
      </mat-card-content>
    </mat-card>
  }

  @if (hasGeneratedBoard() && board().length > 0) {
    <mat-card class="bingo-board" @boardAnimation>
      <mat-grid-list [cols]="gridCols()" rowHeight="1:1" gutterSize="8">
        @for (cell of board(); track cell.song.id; let i = $index) {
          <mat-grid-tile>
            <button 
              class="song-cell"
              [class.marked]="cell.marked"
              (click)="toggleCell(i)"
              mat-button>
              <div class="cell-content">
                <mat-icon class="check-icon">{{ cell.marked ? 'check_circle' : 'radio_button_unchecked' }}</mat-icon>
                <div class="song-info">
                  <div class="song-title">{{ cell.song.title }}</div>
                  <div class="song-artist">{{ cell.song.artist }}</div>
                  @if (gameSettings().showGenre) {
                    <div class="song-genre">{{ cell.song.genre }}</div>
                  }
                </div>
              </div>
            </button>
          </mat-grid-tile>
        }
      </mat-grid-list>
    </mat-card>
  }
</div>
